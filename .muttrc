#{{{ General
set realname            = 'Matthias Vogelgesang'
set editor              = 'vim'
set signature           = '~/.mutt/signature'

set folder              = '~/mail'
set mbox_type           = Maildir

set alias_file          = '~/mutt/alias'
set header_cache        = '~/.mutt/cache/headers'
set message_cachedir    = '~/.mutt/cache/bodies'

set wait_key            = no
set sleep_time          = 0     # switch mailbox immediately
set fast_reply          = yes   # reply immediately
set include             = yes   # always include quote

set attribution         = 'On %{%m/%d/%y %H:%M}, %n wrote:'
set use_from            = yes
set envelope_from       = yes
set sendmail            = "/usr/bin/msmtp"
set query_command       = "abook --mutt-query '%s'"

set date_format         = "%m/%d"
set sort                = threads
set sort_aux            = reverse-last-date-received
set index_format        = "%?M?+& ? %-25.25F  %s"

set pager_index_lines   = 10
set pager_context       = 4
set pager_stop
unset markers           # No + markers

set to_chars            = " .>-<L"
set status_chars        = " *%A"
set status_format       = "──── %f – %m messages%?n? (%n new)?%?d? (%d to delete)?%?t? (%t tagged)? %>─%?p?( %p postponed )? "

set sidebar_delim       = '  │'
set sidebar_visible     = yes
set sidebar_width       = 32
#}}}
#{{{ gpgme
set crypt_use_gpgme             = yes
set crypt_replysign             = yes
set crypt_replyencrypt          = yes
set crypt_replysignencrypted    = yes
set crypt_verify_sig            = yes
#}}}
#{{{ Accounts

source ~/.mutt/account.gmail.com
folder-hook $folder/gmail "source ~/.mutt/account.gmail.com"

source ~/.mutt/account.kit.edu
folder-hook $folder/kit "source ~/.mutt/account.kit.edu"

# source default mailbox
source ~/.mutt/account.gmail.com

reply-hook .                        ""
reply-hook '~t reply.github.com'    "set editor='vim -c \":call MailFixGithubReply()\""

folder-hook INBOX   "macro index,pager $ '<sync-mailbox><shell-escape>mbsync inboxes<enter><shell-escape>notmuch new<enter>'"
#}}}
#{{{ Headers
ignore *
unignore from: to: cc: date: subject:
unhdr_order *
hdr_order from: to: cc: date: subject:

auto_view text/html
#}}}
#{{{ Colors
color normal        color015 color234
color tilde         color254 color234   # after attachment
color status        color038 color234
color message       color118 color234
color signature     color240 color234
color attachment    color240 color234
color indicator     color214 color234
color tree          color238 color234

color index         color154 color234   ~N
color index         color156 color234   ~O
color index         color133 color234   ~F
color index         color160 color234   ~D
color index         color208 color234   ~T

color hdrdefault    color250 color234
color header        color214 color234 "^Subject"

color body          color032 color234 "(finger|ftp|http|https|news|telnet)://[^ >]*"

# Quotes ---------------------------4------------
color quoted        color221 color234
color quoted1       color108 color234
color quoted2       color097 color234
color quoted3       color215 color234
color quoted3       color209 color234
color quoted4       color210 color234
color quoted5       color211 color234
color quoted6       color212 color234
color quoted7       color213 color234
#
# Collapsed threads -----------------------------
# color index         color229 color233   "~v~(!~N)"  # no unread
color index         color160 color234   "~v~D"      # deleted
#}}}
#{{{ Bindings
bind index gg           first-entry
bind index G            last-entry
bind index j            next-entry
bind index k            previous-entry

bind index <tab>        sync-mailbox
bind index <space>      collapse-thread

bind pager \Cj          next-line
bind pager \Ck          previous-line

bind index,pager \Cu    half-up
bind index,pager \Cd    half-down

bind index,pager J      sidebar-next
bind index,pager K      sidebar-prev
bind index,pager O      sidebar-open

bind editor <tab>       complete-query
#}}}
#{{{ Macros
macro pager \cb <pipe-entry>'urlview'<enter>  "follow links"
#}}}
